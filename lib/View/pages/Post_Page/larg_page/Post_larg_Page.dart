import 'package:auto_size_text/auto_size_text.dart';import 'package:firebase_storage/firebase_storage.dart';import 'package:flutter/cupertino.dart';import 'package:flutter/material.dart';import 'package:get/get.dart';import 'package:google_fonts/google_fonts.dart';import 'package:link_text/link_text.dart';import 'package:loading_animation_widget/loading_animation_widget.dart';import 'package:notificationsystem/controler/method.dart';import '../../../../controler/model.dart';import '../../../../help/Colors.dart';import '../../../../help/text_style.dart';import 'Bar_OF_stages.dart';import 'Button_Delete.dart';class Post_larg_Page extends StatefulWidget {  const Post_larg_Page({Key? key}) : super(key: key);  @override  State<Post_larg_Page> createState() => _Post_larg_PageState();}class _Post_larg_PageState extends State<Post_larg_Page> {  @override  void initState() {    super.initState();  }  @override  Widget build(BuildContext context) {    return Padding(      padding: EdgeInsets.only(        left: MediaQuery.of(context).size.width / 40,      ),      child: Row(        mainAxisAlignment: MainAxisAlignment.spaceBetween,        children: [          Obx(             () {              return Methods.post.value==true?Container(                width: MediaQuery.of(context).size.width / 1.6,                height: MediaQuery.of(context).size.height / 1.025,                child: Column(                  mainAxisAlignment: MainAxisAlignment.start,                  crossAxisAlignment: CrossAxisAlignment.center,                  children: [                    Padding(                      padding: EdgeInsets.only(                        top: MediaQuery.of(context).size.height / 25,                      ),                      child: Text(                        "المنشورات",                        style: Text_Style.getstyle(                            fontsize: MediaQuery.of(context).size.height / 15,                            ColorText: Colorsapp.SecondColor,                            fontWeight: FontWeight.w700),                      ),                    ),                    ////                    ////                    Expanded(                      child: Container(                        width: MediaQuery.of(context).size.width / 1.5,                        child: ListView.builder(                            itemCount: Methods.newsList.length,                            itemBuilder: (BuildContext context, int index) {                              return Padding(                                padding: EdgeInsets.symmetric(                                    horizontal: 5, vertical: 20),                                child: Container(                                  width: MediaQuery.of(context).size.width / 5,                                  decoration: BoxDecoration(                                    color: Colorsapp.Container_post,                                    borderRadius: BorderRadius.all(Radius.circular(                                            10.0) //                 <--- border radius here                                        ),                                  ),                                  child: Column(                                    mainAxisAlignment:                                        MainAxisAlignment.spaceBetween,                                    children: [                                      Bar_OF_stages(                                        onPressed: ()async {                                          await Methods.News.doc(Methods.newsList[index].id).delete();                                          for(int i=0;i<Methods.newsList[index]["Images"].length;i++){                                            await FirebaseStorage.instance.refFromURL(Methods.newsList[index]["Images"][i]).delete();                                          }                                        },                                        RowOftext: Row(                                          children: [                                            Container(                                              width: MediaQuery.of(context)                                                      .size                                                      .width /                                                  3,                                              child: Directionality(                                                  textDirection: TextDirection.rtl,                                                  child: ListView.builder(                                                      scrollDirection:                                                          Axis.horizontal,                                                      itemCount:Methods.newsList[index]["Stages"].length,                                                      itemBuilder:                                                          (BuildContext context,                                                              int index1) {                                                        return Padding(                                                          padding: const EdgeInsets.only(top: 10),                                                          child: Text(                                                            textDirection:                                                                TextDirection.rtl,                                                            " | ${Methods.newsList[index]["Stages"][index1]}",                                                            style: Text_Style.getstyle(                                                                fontsize: MediaQuery.of(                                                                            context)                                                                        .size                                                                        .height /                                                                    35,                                                                ColorText: Colorsapp                                                                    .mainColor,                                                                fontWeight:                                                                    FontWeight                                                                        .w500),                                                          ),                                                        );                                                      })),                                            ),                                            Center(                                                child: Text(                                              textAlign: TextAlign.center,                                              textDirection: TextDirection.rtl,                                              "المرحلة : ",                                              style: Text_Style.getstyle(                                                  fontsize: MediaQuery.of(context)                                                          .size                                                          .height /                                                      35,                                                  ColorText: Colorsapp.mainColor,                                                  fontWeight: FontWeight.w900),                                            )),                                          ],                                        ),                                      ),                                      Padding(                                        padding: EdgeInsets.all(8),                                        child: Column(                                          children: [                                            Padding(                                              padding: const EdgeInsets.all(5.0),                                              child: Container(                                                  width: MediaQuery.of(context).size.width / 1.2,                                                  child: AutoSizeText(                                                      textAlign: TextAlign.start,                                                      textDirection: TextDirection.rtl,                                                      "${Methods.newsList[index]["Title"].toString() }",                                                      style: GoogleFonts.tajawal(                                                        textStyle: TextStyle(                                                            fontFamily: 'Al Jazeera Arabic',                                                            fontSize:                                                            MediaQuery.of(context).size.height / 35,                                                            color: Colorsapp.redColor,                                                            fontWeight: FontWeight.w800),                                                      ))),                                            ),                                            if (Methods.newsList[index]["Images"].isNotEmpty)                                            Container(                                                width: MediaQuery.of(context).size.width / 1.8,                                                height: 300,                                                child: Directionality(                                                    textDirection: TextDirection.rtl,                                                    child: ListView.builder(                                                  itemCount:Methods.newsList[index]["Images"].length ,                                                  scrollDirection: Axis.horizontal,                                                  itemBuilder: (BuildContext context, int index2) {                                                    return  Padding(                                                      padding: const EdgeInsets.all(5.0),                                                      child: Container(                                                        decoration: BoxDecoration(                                                          color: Colors.white,                                                          borderRadius: BorderRadius.circular(10),                                                          border:Border.all(                                                            color: Colorsapp.mainColor,                                                            width: 2                                                          )                                                        ),                                                          child: ClipRRect(                                                          borderRadius: BorderRadius.circular(10),                                                          child: Image.network(                                                            Methods.newsList[index]["Images"][index2].toString(),                                                            fit: BoxFit.contain,                                                          ))),                                                    );                                                  },                                                ))                                            ),                                            if (Methods.newsList[index]["Link"].isNotEmpty)                                              Padding(                                                padding: EdgeInsets.only(                                                  left: MediaQuery.of(context).size.width / 100,                                                ),                                                child: Align(                                                  alignment: Alignment.centerLeft,                                                  child: LinkText(                                                    linkStyle: TextStyle(                                                      color: Colors.blue,                                                      decoration: TextDecoration.underline,                                                      fontSize: MediaQuery.of(context).size.height / 40,                                                    ),                                                    "${Methods.newsList[index]["Link"].toString() }",                                                    textAlign: TextAlign.center,                                                    shouldTrimParams: false,                                                  ),                                                ),                                              ),                                            Padding(                                              padding: const EdgeInsets.all(8.0),                                              child: Container(                                                  width: MediaQuery.of(context).size.width / 1.2,                                                  child: AutoSizeText(                                                    textAlign: TextAlign.start,                                                    textDirection: TextDirection.rtl,                                                    "${Methods.newsList[index]["body"].toString() }",                                                style: Text_Style.getstyle(                                                        fontsize: MediaQuery.of(context).size.height / 30,                                                        ColorText: Colorsapp.mainColor,                                                        fontWeight: FontWeight.w500),                                                  )),                                            ),                                          ],                                        ),                                      )                                    ],                                  ),                                ),                              );                            }),                      ),                    ),                  ],                ),              ):Padding(                padding:  EdgeInsets.only(left: MediaQuery.of(context).size.width/4),                child: LoadingAnimationWidget.flickr(                  size: 200,                 leftDotColor: Colorsapp.mainColor,                  rightDotColor: Colorsapp.SecondColor,                  //color: Colorsapp.mainColor,                ),              );            }          ),          ///////////////////////          //////////////////////////////          ///////////////////////////////////////////////          ///////////////////////////////////////////////////////////          if (MediaQuery.of(context).size.longestSide > 1000)            Column(              mainAxisAlignment: MainAxisAlignment.spaceAround,              children: [                Image.asset("photo/1111.png",                    width: MediaQuery.of(context).size.width / 3.6,                    height: MediaQuery.of(context).size.height / 1.8,                    alignment: Alignment.centerRight),                Text(                  "الاخبار",                  style: Text_Style.getstyle(                      fontsize: MediaQuery.of(context).size.height / 15,                      ColorText: Colorsapp.SecondColor,                      fontWeight: FontWeight.w700),                ),                Row(                  mainAxisAlignment: MainAxisAlignment.spaceBetween,                  children: [                    Text(                      "SWAP",                      style: Text_Style.getstyle(                          fontsize: MediaQuery.of(context).size.height / 20,                          ColorText: Colorsapp.White,                          fontWeight: FontWeight.w500),                    ),                    Icon(                      Icons.arrow_forward,                      color: Colorsapp.White,                      size: 30,                    ),                  ],                ),              ],            ),        ],      ),    );  }}