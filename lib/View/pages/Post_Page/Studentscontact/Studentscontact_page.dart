import 'package:auto_size_text/auto_size_text.dart';import 'package:flutter/cupertino.dart';import 'package:flutter/material.dart';import 'package:get/get.dart';import 'package:google_fonts/google_fonts.dart';import 'package:loading_animation_widget/loading_animation_widget.dart';import 'package:notificationsystem/controler/method.dart';import 'dart:html' as html;import '../../../../controler/model.dart';import '../../../../help/Colors.dart';import '../../../../help/text_style.dart';class Studentscontact_page extends StatefulWidget {  const Studentscontact_page({Key? key}) : super(key: key);  @override  State<Studentscontact_page> createState() => _Studentscontact_pageState();}class _Studentscontact_pageState extends State<Studentscontact_page> {  @override  void initState() {    super.initState();  }  RxBool deletecontact=false.obs;  @override  Widget build(BuildContext context) {    return Padding(      padding: EdgeInsets.only(          left:MediaQuery.of(context).size.width>1000?          (MediaQuery.of(context).size.width / 40) :          0      ),      child: Row(        mainAxisAlignment: MediaQuery.of(context).size.width>1000?        MainAxisAlignment.spaceBetween:        MainAxisAlignment.center,        children: [          Obx(                  () {                return Methods.Complete.value==true?                Container(                  width:MediaQuery.of(context).size.width>1000?                  (MediaQuery.of(context).size.width / 1.6):                  MediaQuery.of(context).size.width / 1,                  height: MediaQuery.of(context).size.height / 1.025,                  child: Column(                    mainAxisAlignment: MainAxisAlignment.start,                    crossAxisAlignment: CrossAxisAlignment.center,                    children: [                      Padding(                        padding: EdgeInsets.only(                          top: MediaQuery.of(context).size.height / 25,                        ),                        child: Text(                          "رسائل الطلاب",                          style: Text_Style.getstyle(                              fontsize: MediaQuery.of(context).size.height / 15,                              ColorText: Colorsapp.SecondColor,                              fontWeight: FontWeight.w700),                        ),                      ),                      Obx(                              () {                            return Methods.contactList.value.isEmpty?Container(                              width:MediaQuery.of(context).size.width>1000?                              (MediaQuery.of(context).size.width / 1.5):                              MediaQuery.of(context).size.width / 1.1,                              height: MediaQuery.of(context).size.height/1.4,                              child: Column(                                  mainAxisAlignment: MainAxisAlignment.spaceBetween,                                  crossAxisAlignment: CrossAxisAlignment.center,                                  children: [                                    Image.asset("photo/No data-cuate.png",                                      width: MediaQuery.of(context).size.width/1,                                      height: MediaQuery.of(context).size.height/2,                                    ),                                    Text(                                      "لا يوجد رسائل",                                      style: Text_Style.getstyle(                                          fontsize: MediaQuery.of(context).size.height / 20,                                          ColorText: Colorsapp.SecondColor,                                          fontWeight: FontWeight.w700),                                    ),                                    Padding(                                      padding: const EdgeInsets.only(top: 50),                                      child: Container(                                          width: 200,                                          height: MediaQuery.of(context).size.height/15,                                          child: ElevatedButton(                                            onPressed: () {                                              html.window.location.reload();                                              Stages.PageController.value=2;                                            },                                            style: ButtonStyle(                                                foregroundColor: MaterialStateProperty.all<Color>(Colors.white),                                                backgroundColor: MaterialStateProperty.all<Color>(Colorsapp.mainColor),                                                shape: MaterialStateProperty.all<RoundedRectangleBorder>(                                                    RoundedRectangleBorder(                                                        borderRadius: BorderRadius.circular(10),                                                        side: const BorderSide(color: Colors.white)                                                    )                                                )                                            ),                                            child: const Icon(Icons.refresh_sharp,                                              size: 40,                                              color: Colors.white,                                            ),                                          )),                                    ),                                  ]                              ),                            ): Expanded(                              child: Container(                                width:MediaQuery.of(context).size.width>1000?                                (MediaQuery.of(context).size.width / 1.5)                                    :MediaQuery.of(context).size.width / 1.1,                                child: ListView.builder(                                    itemCount: Methods.contactList.length,                                    itemBuilder: (BuildContext context, int index) {                                      return Padding(                                        padding: const EdgeInsets.symmetric(                                            horizontal: 5, vertical: 10),                                        child: Container(                                          width: MediaQuery.of(context).size.width / 5,                                          decoration: BoxDecoration(                                            color: Colorsapp.Container_post,                                            borderRadius: const BorderRadius.all(Radius.circular(                                                10.0) //                 <--- border radius here                                            ),                                          ),                                          child: Column(                                            mainAxisAlignment:                                            MainAxisAlignment.spaceBetween,                                            children: [                                              Padding(                                                padding: EdgeInsets.all(5),                                                child: Row(                                                  mainAxisAlignment: MainAxisAlignment.spaceBetween,                                                  children: [                                       if(MediaQuery.of(context).size.width>1000)                                                Padding(                                                padding: const EdgeInsets.all(2),                                          child: Container(                                            width: MediaQuery.of(context).size.width / 13,                                            height: MediaQuery.of(context).size.height / 18,                                            decoration: BoxDecoration(                                                color: Colors.red,                                                borderRadius: BorderRadius.all(                                                  Radius.circular(15),                                                ),                                                border: Border.all(                                                    color: Colorsapp.mainColor, width: 2)),                                            child: ElevatedButton(                                              style: ElevatedButton.styleFrom(                                                backgroundColor: Colors.red,                                                shape: RoundedRectangleBorder(                                                    borderRadius: BorderRadius.circular(15)),                                              ),                                              onPressed: () async {                                                print("delete1 :${Methods.contactList.length}");                                                await Methods.contact.doc(Methods.contactList[index].id).delete().whenComplete(() => {                                                  deletecontact.value=true                                                });                                                // for(int i=0;i<Methods.SchedulessList[index]["Images"].length;i++){                                                //                                                //   await FirebaseStorage.instance.refFromURL(Methods.SchedulessList[index]["Images"][i]).delete();                                                // }                                                if (deletecontact.value==true){                                                  print("delete5 :${Methods.contactList.length}");                                                  Future.delayed(                                                      const Duration(                                                          seconds:0), () {                                                    setState(() {                                                      Methods.contactList                                                          .removeAt(index);                                                      print(index);                                                    });                                                  });                                                }                                              },                                              child: Padding(                                                padding: const EdgeInsets.only(top: 0),                                                child: AutoSizeText(                                                  "حذف",                                                  style: Text_Style.getstyle(                                                      fontsize: MediaQuery.of(context).size.width / 60,                                                      ColorText: Colorsapp.White,                                                      fontWeight: FontWeight.w700),                                                ),                                              ),),                                          ),                                        ),                                                    Padding(                                                      padding: const EdgeInsets.all(8.0),                                                      child: AutoSizeText(                                                        textAlign: TextAlign.center,                                                        textDirection: TextDirection.rtl,                                                        Methods.contactList[index]["student_name"].toString(),                                                        style: Text_Style.getstyle(                                                            fontsize: MediaQuery.of(context).size.height / 30,                                                            ColorText: Colorsapp.mainColor,                                                            fontWeight: FontWeight.w500),                                                      ),                                                    ),                                                    Padding(                                                      padding: const EdgeInsets.all(5.0),                                                      child: AutoSizeText(                                                          textAlign: TextAlign.start,                                                          textDirection: TextDirection.rtl,                                                          Methods.contactList[index]["stage"].toString(),                                                          style: GoogleFonts.tajawal(                                                            textStyle: TextStyle(                                                                fontFamily: 'Al Jazeera Arabic',                                                                fontSize:                                                                MediaQuery.of(context).size.height / 35,                                                                color: Colorsapp.redColor,                                                                fontWeight: FontWeight.w800),                                                          )),                                                    ),                                                  ],                                                ),                                              ),                                              Container(                                                width:MediaQuery.of(context).size.width>1000?                                                (MediaQuery.of(context).size.width / 1.5)                                                    :MediaQuery.of(context).size.width / 1.1,                                                decoration: BoxDecoration(                                                  color: Colorsapp.TextColor,                                                  borderRadius: const BorderRadius.all(Radius.circular(                                                      10.0) //                 <--- border radius here                                                  ),                                                ),                                                child: Padding(                                                  padding: const EdgeInsets.all(8.0),                                                  child: Container(                                                      width: MediaQuery.of(context).size.width / 1.2,                                                      child: AutoSizeText(                                                        textAlign: TextAlign.start,                                                        textDirection: TextDirection.rtl,                                                        Methods.contactList[index]["text"].toString(),                                                        style: Text_Style.getstyle(                                                            ColorText: Colorsapp.mainColor,                                                            fontWeight: FontWeight.w400,                                                            fontsize: MediaQuery.of(context).size.width /60),                                                      )                                                  ),                                                ),                                              )                                            ],                                          ),                                        ),                                      );                                    }),                              ),                            );                          }                      )                    ],                  ),                ):Padding(                  padding:  EdgeInsets.only(left: MediaQuery.of(context).size.width/4),                  child: LoadingAnimationWidget.flickr(                    size: 200,                    leftDotColor: Colorsapp.mainColor,                    rightDotColor: Colorsapp.SecondColor,                    //color: Colorsapp.mainColor,                  ),                );              }          ),          ///////////////////////          //////////////////////////////          ///////////////////////////////////////////////          ///////////////////////////////////////////////////////////          if (MediaQuery.of(context).size.longestSide > 1000)            Column(              mainAxisAlignment: MainAxisAlignment.spaceAround,              children: [                Image.asset("photo/1111.png",                    width: MediaQuery.of(context).size.width / 3.6,                    height: MediaQuery.of(context).size.height / 1.8,                    alignment: Alignment.centerRight),                Text(                  "تواصل الطلاب",                  style: Text_Style.getstyle(                      fontsize: MediaQuery.of(context).size.height / 15,                      ColorText: Colorsapp.SecondColor,                      fontWeight: FontWeight.w700),                ),              ],            ),        ],      ),    );  }}